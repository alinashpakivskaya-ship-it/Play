<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–§–æ—Ä—Ç—É–Ω–∞ –∑–Ω–∞–Ω–∏–π - –ò–≥—Ä–æ–≤–æ–µ –ö–æ—Ä–æ–ª–µ–≤—Å—Ç–≤–æ</title>
    <style>
        /* –°—Ç–∏–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è —Ç–∞–∫–∏–º–∏ –∂–µ –∫–∞–∫ –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Neue', cursive;
            background: linear-gradient(135deg, #FF69B4 0%, #4169E1 25%, #32CD32 50%, #FFD700 75%, #8A2BE2 100%);
            min-height: 100vh;
            color: #2C3E50;
            overflow-x: hidden;
            animation: rainbow-bg 10s ease infinite;
            background-size: 400% 400%;
        }

        @keyframes rainbow-bg {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .title {
            font-size: 4rem;
            font-weight: 800;
            background: linear-gradient(135deg, #FF6B6B, #4ECDC4, #FFD166, #06D6A0, #7209B7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
            text-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        }

        .subtitle {
            font-size: 1.5rem;
            color: #2C3E50;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .main-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        /* –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å - –†–∞–∑–¥–µ–ª—ã */
        .sections-panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border: 4px solid #F1C40F;
        }

        .sections-title {
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 30px;
            color: #2C3E50;
            background: linear-gradient(135deg, #8B4513, #D2691E);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .sections-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .section-card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .section-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            border-color: #F1C40F;
        }

        .section-card.selected {
            border-color: #F1C40F;
            background: rgba(241, 196, 15, 0.1);
            transform: scale(1.05);
        }

        .section-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
        }

        .section-name {
            font-size: 1.4rem;
            font-weight: 700;
            color: #2C3E50;
            margin-bottom: 8px;
        }

        .section-description {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 8px;
            font-style: italic;
        }

        .section-status {
            font-size: 0.9rem;
            color: #666;
            font-weight: 600;
        }

        .custom-theme-actions {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin-top: 10px;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 0.8rem;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-edit {
            background: #FFD166;
            color: #2C3E50;
        }

        .btn-delete {
            background: #FF6B6B;
            color: white;
        }

        .btn-small:hover {
            transform: translateY(-2px);
        }

        /* –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å - –ò–≥—Ä–æ–∫–∏ –∏ –ø—Ä–∞–≤–∏–ª–∞ */
        .right-panel {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .players-setup {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border: 4px solid #4ECDC4;
        }

        .setup-title {
            font-size: 2rem;
            text-align: center;
            margin-bottom: 25px;
            color: #2C3E50;
        }

        .players-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
        }

        .player-input {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .player-input:hover {
            border-color: #4ECDC4;
            transform: translateY(-2px);
        }

        .player-input input {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
            font-family: 'Comic Neue', cursive;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .player-color {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .rules-panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border: 4px solid #FF6B6B;
            max-height: 500px;
            overflow-y: auto;
        }

        .rules-title {
            font-size: 2rem;
            text-align: center;
            margin-bottom: 25px;
            color: #2C3E50;
        }

        .rules-content {
            font-size: 1rem;
            line-height: 1.6;
            color: #2C3E50;
        }

        .rules-section {
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 12px;
            border-left: 4px solid #FFD166;
        }

        .rules-section h3 {
            color: #2C3E50;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .rules-section ul {
            list-style: none;
            padding-left: 0;
        }

        .rules-section li {
            margin-bottom: 8px;
            padding-left: 25px;
            position: relative;
        }

        .rules-section li:before {
            content: 'üéØ';
            position: absolute;
            left: 0;
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 25px;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-family: 'Comic Neue', cursive;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn-primary {
            background: linear-gradient(135deg, #FF6B6B, #4ECDC4);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #FFD166, #06D6A0);
            color: white;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .add-player {
            background: linear-gradient(135deg, #7209B7, #F72585);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-family: 'Comic Neue', cursive;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px auto;
            display: block;
        }

        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .bubble {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            animation: float 20s infinite linear;
        }

        @keyframes float {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(100px, 100px) rotate(360deg); }
        }

        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 800px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .modal-title {
            font-size: 2.2rem;
            color: #2C3E50;
            margin-bottom: 10px;
        }

        .modal-subtitle {
            color: #666;
            font-size: 1.1rem;
        }

        .theme-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-label {
            font-weight: 700;
            color: #2C3E50;
        }

        .form-input {
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-family: 'Comic Neue', cursive;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-input:focus {
            border-color: #4ECDC4;
            outline: none;
        }

        .categories-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .category-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            border: 2px solid #e9ecef;
        }

        .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .category-name {
            font-weight: 700;
            color: #2C3E50;
        }

        .questions-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .question-item {
            background: white;
            border-radius: 8px;
            padding: 12px;
            border: 1px solid #e9ecef;
        }

        .question-text {
            font-weight: 600;
            margin-bottom: 8px;
        }

        .answers-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }

        .answer-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .correct-answer {
            color: #06D6A0;
            font-weight: 600;
        }

        .modal-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 25px;
        }

        .btn-modal {
            padding: 10px 20px;
            font-size: 1rem;
        }

        /* –ü–∞–ø–∫–∞ —Å —Ç–µ–º–∞–º–∏ */
        .themes-folder {
            margin-top: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            border: 3px dashed #4ECDC4;
            grid-column: 1 / -1;
        }

        .folder-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .folder-title {
            font-size: 1.5rem;
            color: #2C3E50;
            font-weight: 700;
        }

        .folder-toggle {
            background: #4ECDC4;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-family: 'Comic Neue', cursive;
            font-weight: 600;
        }

        .folder-content {
            display: none;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }

        .folder-content.expanded {
            display: grid;
        }

        .folder-theme-card {
            background: white;
            border-radius: 12px;
            padding: 15px;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .folder-theme-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-color: #4ECDC4;
        }

        .folder-theme-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            text-align: center;
        }

        .folder-theme-name {
            font-weight: 700;
            color: #2C3E50;
            margin-bottom: 5px;
            text-align: center;
        }

        .folder-theme-description {
            font-size: 0.8rem;
            color: #666;
            margin-bottom: 10px;
            text-align: center;
            font-style: italic;
        }

        .folder-theme-actions {
            display: flex;
            gap: 8px;
            justify-content: center;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .sections-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 768px) {
            .sections-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .title {
                font-size: 3rem;
            }
            
            .section-card {
                padding: 20px;
            }
            
            .answers-container {
                grid-template-columns: 1fr;
            }
            
            .custom-theme-actions {
                flex-direction: column;
            }
            
            .folder-content {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .sections-grid {
                grid-template-columns: 1fr;
            }
            
            .title {
                font-size: 2.5rem;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 200px;
            }
            
            .modal-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="animated-bg" id="animated-bg"></div>

    <div class="container">
        <header class="header">
            <h1 class="title">üé≤ –§–æ—Ä—Ç—É–Ω–∞ –∑–Ω–∞–Ω–∏–π üé≤</h1>
            <p class="subtitle">–ò–≥—Ä–∞, –≥–¥–µ –∑–Ω–∞–Ω–∏—è —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –ø–æ–±–µ–¥–æ–π!</p>
        </header>

        <div class="main-content">
            <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å - –†–∞–∑–¥–µ–ª—ã -->
            <div class="sections-panel">
                <h2 class="sections-title">üéØ –í—ã–±–µ—Ä–∏ —Ä–∞–∑–¥–µ–ª –∑–Ω–∞–Ω–∏–π</h2>
                <div class="sections-grid" id="sections-grid">
                    <!-- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã -->
                    <div class="section-card" onclick="selectSection('chess')">
                        <div class="section-icon">‚ôõ</div>
                        <div class="section-name">–®–∞—Ö–º–∞—Ç—ã</div>
                        <div class="section-description">–ò–≥—Ä–∞ —Ä–∞–∑—É–º–∞ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏</div>
                        <div class="section-status">–ì–æ—Ç–æ–≤ –∫ –∏–≥—Ä–µ!</div>
                    </div>

                    <div class="section-card" onclick="selectSection('math')">
                        <div class="section-icon">‚ûó</div>
                        <div class="section-name">–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞</div>
                        <div class="section-description">–¶–∞—Ä–∏—Ü–∞ –Ω–∞—É–∫</div>
                        <div class="section-status">–ì–æ—Ç–æ–≤ –∫ –∏–≥—Ä–µ!</div>
                    </div>

                    <div class="section-card" onclick="selectSection('russian')">
                        <div class="section-icon">üìö</div>
                        <div class="section-name">–†—É—Å—Å–∫–∏–π —è–∑—ã–∫</div>
                        <div class="section-description">–í–µ–ª–∏–∫–∏–π –∏ –º–æ–≥—É—á–∏–π</div>
                        <div class="section-status">–ì–æ—Ç–æ–≤ –∫ –∏–≥—Ä–µ!</div>
                    </div>

                    <div class="section-card" onclick="selectSection('fairy-tales')">
                        <div class="section-icon">üìñ</div>
                        <div class="section-name">–°–∫–∞–∑–∫–∏</div>
                        <div class="section-description">–ú–∏—Ä –≤–æ–ª—à–µ–±—Å—Ç–≤–∞ –∏ —á—É–¥–µ—Å</div>
                        <div class="section-status">–ì–æ—Ç–æ–≤ –∫ –∏–≥—Ä–µ!</div>
                    </div>

                    <div class="section-card" onclick="selectSection('logic')">
                        <div class="section-icon">üß©</div>
                        <div class="section-name">–õ–æ–≥–∏–∫–∞</div>
                        <div class="section-description">–†–∞–∑–≤–∏–≤–∞–µ–º –º—ã—à–ª–µ–Ω–∏–µ</div>
                        <div class="section-status">–°–∫–æ—Ä–æ –±—É–¥–µ—Ç!</div>
                    </div>

                    <div class="section-card" onclick="selectSection('animals')">
                        <div class="section-icon">üêæ</div>
                        <div class="section-name">–ñ–∏–≤–æ—Ç–Ω—ã–µ</div>
                        <div class="section-description">–ú–∏—Ä —Ñ–∞—É–Ω—ã</div>
                        <div class="section-status">–ì–æ—Ç–æ–≤ –∫ –∏–≥—Ä–µ!</div>
                    </div>


                    <div class="section-card" onclick="selectSection('emotions')">
                        <div class="section-icon">üòä</div>
                        <div class="section-name">–≠–º–æ—Ü–∏–∏</div>
                        <div class="section-description">–ß–∏—Ç–∞–µ–º —Å –≤—ã—Ä–∞–∂–µ–Ω–∏–µ–º!</div>
                        <div class="section-status">–ì–æ—Ç–æ–≤ –∫ –∏–≥—Ä–µ!</div>
                    </div>

		    <div class="section-card" onclick="selectSection('behavior')">
                        <div class="section-icon">üìù</div>
                        <div class="section-name">–ü—Ä–∞–≤–∏–ª–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è</div>
                        <div class="section-description">–≠—Ç–∏–∫–µ—Ç –∏ –≤–µ–∂–ª–∏–≤–æ—Å—Ç—å</div>
                        <div class="section-status">–ì–æ—Ç–æ–≤ –∫ –∏–≥—Ä–µ!</div>
                    </div>

                    <!-- –†–∞–∑–¥–µ–ª –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–≤–æ–µ–π —Ç–µ–º—ã -->
                    <div class="section-card" onclick="selectSection('custom-create')">
                        <div class="section-icon">üé®</div>
                        <div class="section-name">–°–æ–∑–¥–∞—Ç—å —Å–≤–æ—é —Ç–µ–º—É</div>
                        <div class="section-description">–ü—Ä–∏–¥—É–º–∞–π —É–Ω–∏–∫–∞–ª—å–Ω—É—é –∏–≥—Ä—É</div>
                        <div class="section-status">–°–æ–∑–¥–∞–π —Å–≤–æ—é –∏–≥—Ä—É!</div>
                    </div>

                    <!-- –ü–∞–ø–∫–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–º–∏ —Ç–µ–º–∞–º–∏ -->
                    <div class="themes-folder">
                        <div class="folder-header">
                            <h3 class="folder-title">üìÅ –ú–æ–∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–µ–º—ã</h3>
                            <button class="folder-toggle" onclick="toggleThemesFolder()">üìÇ –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–º—ã</button>
                        </div>
                        <div class="folder-content" id="themes-folder-content">
                            <!-- –¢–µ–º—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å - –ò–≥—Ä–æ–∫–∏ –∏ –ø—Ä–∞–≤–∏–ª–∞ -->
            <div class="right-panel">
                <div class="players-setup">
                    <h2 class="setup-title">üë• –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–≥—Ä–æ–∫–æ–≤</h2>
                    <div class="players-container" id="players-container">
                        <div class="player-input">
                            <input type="text" placeholder="–ò–º—è –∏–≥—Ä–æ–∫–∞ 1" value="–ò–≥—Ä–æ–∫ 1">
                            <div class="player-color" style="background: #FF6B6B;"></div>
                        </div>
                        <div class="player-input">
                            <input type="text" placeholder="–ò–º—è –∏–≥—Ä–æ–∫–∞ 2" value="–ò–≥—Ä–æ–∫ 2">
                            <div class="player-color" style="background: #4ECDC4;"></div>
                        </div>
                    </div>
                    <button class="add-player" onclick="addPlayer()">+ –î–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä–æ–∫–∞</button>
                    
                    <div class="controls">
                        <button class="btn btn-primary" onclick="startGame()">üéÆ –ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
                        <button class="btn btn-secondary" onclick="resetPlayers()">üîÑ –°–±—Ä–æ—Å–∏—Ç—å</button>
                    </div>
                </div>

                <div class="rules-panel">
                    <h2 class="rules-title">üìú –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã</h2>
                    <div class="rules-content">
                        <div class="rules-section">
                            <h3>üéØ –¶–µ–ª—å –∏–≥—Ä—ã</h3>
                            <p>–°—Ç–∞–Ω—å—Ç–µ –ø–µ—Ä–≤—ã–º –∏–≥—Ä–æ–∫–æ–º, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–±–µ—Ä—ë—Ç –≤—Å—é —Å–≤–æ—é –∫–æ–ª–ª–µ–∫—Ü–∏—é —Ñ–∏–≥—É—Ä–æ–∫ –∏–∑ –≤–æ–ª—à–µ–±–Ω–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞!</p>
                        </div>

                        <div class="rules-section">
                            <h3>üîÑ –•–æ–¥ –∏–≥—Ä—ã</h3>
                            <p>–ò–≥—Ä–æ–∫–∏ —Ö–æ–¥—è—Ç –ø–æ –æ—á–µ—Ä–µ–¥–∏. –•–æ–¥ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä—ë—Ö —à–∞–≥–æ–≤:</p>
                            <ul>
                                <li><strong>üü¶ –í—ã–±–æ—Ä –ü–æ–ª—è</strong> - –ù–∞ —Ç–∞–±–ª–æ –≤—ã—Å–≤–µ—á–∏–≤–∞–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω–∞—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ —Å –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è. –ù–∞–π–¥–∏—Ç–µ –µ–≥–æ –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–º –ø–æ–ª–µ –∏ –∑–∞–ø–æ–º–Ω–∏—Ç–µ –µ–≥–æ —Ü–≤–µ—Ç.</li>
                                <li><strong>‚ùì –û—Ç–≤–µ—Ç –Ω–∞ –í–æ–ø—Ä–æ—Å</strong> - –í–æ–∑—å–º–∏—Ç–µ –∫–∞—Ä—Ç–æ—á–∫—É —Å –∫–æ–ª–æ–¥—ã, —Ü–≤–µ—Ç –∫–æ—Ç–æ—Ä–æ–π —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ü–≤–µ—Ç–æ–º –≤—ã–ø–∞–≤—à–µ–≥–æ –ø–æ–ª—è.</li>
                                <li><strong>üõí –ü–æ–∫—É–ø–∫–∞ –≤ –ú–∞–≥–∞–∑–∏–Ω–µ</strong> - –ï—Å–ª–∏ —É –≤–∞—Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç, –∫—É–ø–∏—Ç–µ —Ñ–∏–≥—É—Ä–∫—É –∏–∑ —Å–≤–æ–µ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏!</li>
                            </ul>
                        </div>

                        <div class="rules-section">
                            <h3>üî• –°–∏—Å—Ç–µ–º–∞ –Ω–∞–≥—Ä–∞–¥</h3>
                            <ul>
                                <li><strong>–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç?</strong> –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –ø–æ–ª—É—á–∞–µ—Ç–µ 1 –∑–æ–ª–æ—Ç—É—é –º–æ–Ω–µ—Ç—É.</li>
                                <li><strong>–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç?</strong> –ù–µ –±–µ–¥–∞! –£–¥–∞—á–∞ —É–ª—ã–±–Ω–µ—Ç—Å—è –≤–∞–º –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑.</li>
                            </ul>
                        </div>

                        <div class="rules-section">
                            <h3>üèÜ –ö–æ–Ω–µ—Ü –∏–≥—Ä—ã –∏ –ü–æ–±–µ–¥–∞</h3>
                            <p>–ò–≥—Ä–∞ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ, –∫–∞–∫ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∏–∑ –∏–≥—Ä–æ–∫–æ–≤ –ø–æ–∫—É–ø–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–æ—Å—Ç–∞—é—â—É—é —Ñ–∏–≥—É—Ä–∫—É –∏–∑ —Å–≤–æ–µ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏. –û–Ω –∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–º!</p>
                        </div>

                        <div class="rules-section">
                            <h3>üí° –°–æ–≤–µ—Ç—ã –¥–ª—è –ø–æ–±–µ–¥—ã</h3>
                            <ul>
                                <li>–í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –∏–∑—É—á–∞–π—Ç–µ –∏–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ</li>
                                <li>–ó–∞–ø–æ–º–∏–Ω–∞–π—Ç–µ —Ü–≤–µ—Ç–∞ –∫–ª–µ—Ç–æ–∫</li>
                                <li>–ü–ª–∞–Ω–∏—Ä—É–π—Ç–µ –ø–æ–∫—É–ø–∫–∏ –≤ –º–∞–≥–∞–∑–∏–Ω–µ</li>
                                <li>–°–ª–µ–¥–∏—Ç–µ –∑–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–µ–π —Å–æ–ø–µ—Ä–Ω–∏–∫–æ–≤</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–≤–æ–µ–π —Ç–µ–º—ã -->
    <div class="modal" id="custom-theme-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">üé® –°–æ–∑–¥–∞–π —Å–≤–æ—é —Ç–µ–º—É</h2>
                <p class="modal-subtitle">–ü—Ä–∏–¥—É–º–∞–π —É–Ω–∏–∫–∞–ª—å–Ω—É—é —Ç–µ–º—É –∏ –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è –∏–≥—Ä—ã</p>
            </div>
            
            <form class="theme-form" id="custom-theme-form">
                <div class="form-group">
                    <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ–º—ã</label>
                    <input type="text" class="form-input" id="theme-name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ú–æ—è –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ —Ç–µ–º—ã</label>
                    <input type="text" class="form-input" id="theme-description" placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤–∞—à–µ–π —Ç–µ–º—ã">
                </div>
                
                <div class="form-group">
                    <label class="form-label">–≠–º–æ–¥–∑–∏ –¥–ª—è —Ç–µ–º—ã</label>
                    <input type="text" class="form-input" id="theme-emoji" placeholder="üéØ" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–ü—Ä–µ–¥–º–µ—Ç—ã –¥–ª—è –º–∞–≥–∞–∑–∏–Ω–∞ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)</label>
                    <input type="text" class="form-input" id="theme-items" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ö–Ω–∏–≥–∞, –†—É—á–∫–∞, –¢–µ—Ç—Ä–∞–¥—å, –ö–∞—Ä–∞–Ω–¥–∞—à, –õ–∏–Ω–µ–π–∫–∞, –õ–∞—Å—Ç–∏–∫" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–¶–µ–Ω—ã –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é, –≤ —Ç–æ–º –∂–µ –ø–æ—Ä—è–¥–∫–µ)</label>
                    <input type="text" class="form-input" id="theme-prices" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 10, 8, 6, 4, 3, 2" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–≠–º–æ–¥–∑–∏ –¥–ª—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é, –≤ —Ç–æ–º –∂–µ –ø–æ—Ä—è–¥–∫–µ)</label>
                    <input type="text" class="form-input" id="theme-emojis" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: üìö, ‚úèÔ∏è, üìì, ‚úé, üìè, üßº" required>
                </div>
                
                <div class="categories-container" id="categories-container">
                    <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
                </div>
                
                <button type="button" class="btn btn-secondary" onclick="addCategory()">+ –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</button>
                
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary btn-modal" onclick="closeCustomThemeModal()">‚ùå –û—Ç–º–µ–Ω–∞</button>
                    <button type="submit" class="btn btn-primary btn-modal">‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–º—É</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        const playerColors = ['#FF6B6B', '#4ECDC4', '#FFD166', '#06D6A0', '#118AB2', '#7209B7'];
        let selectedSection = 'chess';
        let categoryCounter = 0;
        let editingThemeId = null;

        // –°–æ–∑–¥–∞–µ–º –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω
        function createAnimatedBackground() {
            const bg = document.getElementById('animated-bg');
            for (let i = 0; i < 20; i++) {
                const bubble = document.createElement('div');
                bubble.className = 'bubble';
                bubble.style.width = Math.random() * 100 + 50 + 'px';
                bubble.style.height = bubble.style.width;
                bubble.style.left = Math.random() * 100 + 'vw';
                bubble.style.top = Math.random() * 100 + 'vh';
                bubble.style.animationDelay = Math.random() * 20 + 's';
                bubble.style.animationDuration = (Math.random() * 20 + 10) + 's';
                bg.appendChild(bubble);
            }
        }

        function selectSection(section) {
            if (section === 'custom-create') {
                openCustomThemeModal();
                return;
            }
            
            selectedSection = section;
            document.querySelectorAll('.section-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // –í—ã–¥–µ–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã, –Ω–µ —Ç–µ–º—ã –≤ –ø–∞–ø–∫–µ
            const targetCard = event?.currentTarget;
            if (targetCard && !targetCard.closest('.themes-folder')) {
                targetCard.classList.add('selected');
            }
        }

        function addPlayer() {
            const container = document.getElementById('players-container');
            const playerCount = container.children.length;
            
            if (playerCount < 6) {
                const newPlayer = document.createElement('div');
                newPlayer.className = 'player-input';
                newPlayer.innerHTML = `
                    <input type="text" placeholder="–ò–º—è –∏–≥—Ä–æ–∫–∞ ${playerCount + 1}">
                    <div class="player-color" style="background: ${playerColors[playerCount]}"></div>
                `;
                container.appendChild(newPlayer);
            } else {
                alert('–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–æ–≤ - 6!');
            }
        }

        function resetPlayers() {
            const container = document.getElementById('players-container');
            container.innerHTML = `
                <div class="player-input">
                    <input type="text" placeholder="–ò–º—è –∏–≥—Ä–æ–∫–∞ 1" value="–ò–≥—Ä–æ–∫ 1">
                    <div class="player-color" style="background: #FF6B6B;"></div>
                </div>
                <div class="player-input">
                    <input type="text" placeholder="–ò–º—è –∏–≥—Ä–æ–∫–∞ 2" value="–ò–≥—Ä–æ–∫ 2">
                    <div class="player-color" style="background: #4ECDC4;"></div>
                </div>
            `;
        }

        function startGame() {
            const players = [];
            const inputs = document.querySelectorAll('.player-input input');
            
            inputs.forEach((input, index) => {
                if (input.value.trim()) {
                    players.push({
                        name: input.value.trim() || `–ò–≥—Ä–æ–∫ ${index + 1}`,
                        color: playerColors[index],
                        coins: 0,
                        pieces: { king: 0, queen: 0, rook: 0, bishop: 0, knight: 0, pawn: 0 }
                    });
                }
            });

            if (players.length < 1) {
                alert('–î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞!');
                return;
            }

            if (players.length > 6) {
                alert('–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–æ–≤ - 6!');
                return;
            }

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä–æ–∫–æ–≤
            localStorage.setItem('gamePlayers', JSON.stringify(players));
            localStorage.setItem('selectedSection', selectedSection);

            // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É —Ä–∞–∑–¥–µ–ª—É
            if (selectedSection === 'chess') {
                window.location.href = 'chess.html';
            } else if (selectedSection === 'math') {
                window.location.href = 'math.html';
            } else if (selectedSection === 'russian') {
                window.location.href = 'russian.html';
            } else if (selectedSection === 'fairy-tales') {
                window.location.href = 'fairy-tales.html';
	    } else if (selectedSection === 'logic') {
                window.location.href = 'logic.html';
	    } else if (selectedSection === 'animals') {
                window.location.href = 'animals.html';
            } else if (selectedSection === 'behavior') {
                window.location.href = 'behavior.html';
             } else if (selectedSection === 'emotions') {
                window.location.href = 'emotions.html';
            } else if (selectedSection.startsWith('custom-')) {
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é —Ç–µ–º—É
                const themeId = selectedSection.split('-')[1];
                localStorage.setItem('customThemeId', themeId);
                window.location.href = 'custom-theme.html';
            } else {
                // –î–ª—è —Ä–∞–∑–¥–µ–ª–æ–≤ "–°–∫–æ—Ä–æ –±—É–¥–µ—Ç!"
                alert('–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω! –°–µ–π—á–∞—Å –º–æ–∂–Ω–æ –∏–≥—Ä–∞—Ç—å –≤ "–®–∞—Ö–º–∞—Ç—ã", "–ú–∞—Ç–µ–º–∞—Ç–∏–∫—É", "–†—É—Å—Å–∫–∏–π —è–∑—ã–∫" –∏ "–°–∫–∞–∑–∫–∏".');
            }
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ —Ç–µ–º–∞–º–∏
        function openCustomThemeModal(themeId = null) {
            editingThemeId = themeId;
            document.getElementById('custom-theme-modal').classList.add('active');
            
            if (themeId) {
                // –†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
                loadThemeForEditing(themeId);
            } else {
                // –†–µ–∂–∏–º —Å–æ–∑–¥–∞–Ω–∏—è
                resetThemeForm();
                if (categoryCounter === 0) {
                    addCategory();
                }
            }
        }

        function closeCustomThemeModal() {
            document.getElementById('custom-theme-modal').classList.remove('active');
            editingThemeId = null;
        }

        function resetThemeForm() {
            document.getElementById('custom-theme-form').reset();
            document.getElementById('categories-container').innerHTML = '';
            categoryCounter = 0;
        }

        function loadThemeForEditing(themeId) {
            const customThemes = JSON.parse(localStorage.getItem('customThemes') || '[]');
            const theme = customThemes.find(t => t.id === themeId);
            
            if (!theme) {
                alert('–¢–µ–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!');
                return;
            }
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—É –¥–∞–Ω–Ω—ã–º–∏ —Ç–µ–º—ã
            document.getElementById('theme-name').value = theme.name;
            document.getElementById('theme-description').value = theme.description || '';
            document.getElementById('theme-emoji').value = theme.emoji || 'üéØ';
            document.getElementById('theme-items').value = theme.items.join(', ');
            document.getElementById('theme-prices').value = theme.prices.join(', ');
            document.getElementById('theme-emojis').value = theme.itemEmojis.join(', ');
            
            // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–π
            document.getElementById('categories-container').innerHTML = '';
            categoryCounter = 0;
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
            theme.categories.forEach((category, index) => {
                addCategory();
                const lastCategory = document.querySelector('.category-item:last-child');
                lastCategory.querySelector('.category-name-input').value = category.name;
                lastCategory.querySelector('.category-color-select').value = category.color;
                
                // –û—á–∏—â–∞–µ–º –≤–æ–ø—Ä–æ—Å—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏ –¥–æ–±–∞–≤–ª—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ
                const questionsContainer = lastCategory.querySelector('.questions-container');
                questionsContainer.innerHTML = '';
                
                category.questions.forEach((question, qIndex) => {
                    const questionItem = document.createElement('div');
                    questionItem.className = 'question-item';
                    questionItem.innerHTML = `
                        <div class="question-text">–í–æ–ø—Ä–æ—Å ${qIndex + 1}</div>
                        <div class="form-group">
                            <input type="text" class="form-input question-text-input" placeholder="–¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞" value="${question.question}" required>
                        </div>
                        <div class="answers-container">
                            ${question.answers.map((answer, aIndex) => `
                                <div class="answer-item">
                                    <input type="radio" name="correct-${categoryCounter}-${qIndex}" value="${aIndex}" ${aIndex === question.correct ? 'checked' : ''}>
                                    <input type="text" class="form-input answer-input" placeholder="–í–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞ ${aIndex + 1}" value="${answer}" required>
                                </div>
                            `).join('')}
                        </div>
                        <button type="button" class="btn btn-secondary btn-small" onclick="removeQuestion(this)">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –≤–æ–ø—Ä–æ—Å</button>
                    `;
                    questionsContainer.appendChild(questionItem);
                });
            });
        }

        function addCategory() {
            categoryCounter++;
            const categoriesContainer = document.getElementById('categories-container');
            
            const categoryItem = document.createElement('div');
            categoryItem.className = 'category-item';
            categoryItem.innerHTML = `
                <div class="category-header">
                    <div class="category-name">–ö–∞—Ç–µ–≥–æ—Ä–∏—è ${categoryCounter}</div>
                    <button type="button" class="btn btn-secondary btn-small" onclick="removeCategory(this)">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                </div>
                <div class="form-group">
                    <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</label>
                    <input type="text" class="form-input category-name-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –≠–º–æ–¥–∑–∏" required>
                </div>
                <div class="form-group">
                    <label class="form-label">–¶–≤–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</label>
                    <select class="form-input category-color-select">
                        <option value="#FF6B6B">–ö—Ä–∞—Å–Ω—ã–π</option>
                        <option value="#4169E1">–°–∏–Ω–∏–π</option>
                        <option value="#32CD32">–ó–µ–ª–µ–Ω—ã–π</option>
                        <option value="#8A2BE2">–§–∏–æ–ª–µ—Ç–æ–≤—ã–π</option>
                        <option value="#FFD700">–ñ–µ–ª—Ç—ã–π</option>
                        <option value="#FF8C00">–û—Ä–∞–Ω–∂–µ–≤—ã–π</option>
                        <option value="#87CEEB">–ì–æ–ª—É–±–æ–π</option>
                        <option value="#FF69B4">–†–æ–∑–æ–≤—ã–π</option>
                    </select>
                </div>
                <div class="questions-container" id="questions-${categoryCounter}">
                    <!-- –í–æ–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
                </div>
                <button type="button" class="btn btn-secondary btn-small" onclick="addQuestion(${categoryCounter})">+ –î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å</button>
            `;
            
            categoriesContainer.appendChild(categoryItem);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –ø–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
            addQuestion(categoryCounter);
        }

        function removeCategory(button) {
            if (categoryCounter <= 1) {
                alert('–î–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è!');
                return;
            }
            
            const categoryItem = button.closest('.category-item');
            categoryItem.remove();
            categoryCounter--;
        }

        function addQuestion(categoryId) {
            const questionsContainer = document.getElementById(`questions-${categoryId}`);
            const questionCount = questionsContainer.children.length;
            
            if (questionCount >= 10) {
                alert('–ú–∞–∫—Å–∏–º—É–º 10 –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏!');
                return;
            }
            
            const questionItem = document.createElement('div');
            questionItem.className = 'question-item';
            questionItem.innerHTML = `
                <div class="question-text">–í–æ–ø—Ä–æ—Å ${questionCount + 1}</div>
                <div class="form-group">
                    <input type="text" class="form-input question-text-input" placeholder="–¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞" required>
                </div>
                <div class="answers-container">
                    <div class="answer-item">
                        <input type="radio" name="correct-${categoryId}-${questionCount}" value="0" checked>
                        <input type="text" class="form-input answer-input" placeholder="–í–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞ 1" required>
                    </div>
                    <div class="answer-item">
                        <input type="radio" name="correct-${categoryId}-${questionCount}" value="1">
                        <input type="text" class="form-input answer-input" placeholder="–í–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞ 2" required>
                    </div>
                    <div class="answer-item">
                        <input type="radio" name="correct-${categoryId}-${questionCount}" value="2">
                        <input type="text" class="form-input answer-input" placeholder="–í–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞ 3" required>
                    </div>
                    <div class="answer-item">
                        <input type="radio" name="correct-${categoryId}-${questionCount}" value="3">
                        <input type="text" class="form-input answer-input" placeholder="–í–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞ 4" required>
                    </div>
                </div>
                <button type="button" class="btn btn-secondary btn-small" onclick="removeQuestion(this)">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –≤–æ–ø—Ä–æ—Å</button>
            `;
            
            questionsContainer.appendChild(questionItem);
        }

        function removeQuestion(button) {
            const questionItem = button.closest('.question-item');
            const questionsContainer = questionItem.parentElement;
            
            if (questionsContainer.children.length <= 1) {
                alert('–î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –≤–æ–ø—Ä–æ—Å –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏!');
                return;
            }
            
            questionItem.remove();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–æ–º–µ—Ä–∞ –≤–æ–ø—Ä–æ—Å–æ–≤
            const questions = questionsContainer.querySelectorAll('.question-text');
            questions.forEach((question, index) => {
                question.textContent = `–í–æ–ø—Ä–æ—Å ${index + 1}`;
            });
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π —Ç–µ–º—ã
        document.getElementById('custom-theme-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ç–µ–º—ã
            const themeData = {
                id: editingThemeId || Date.now().toString(),
                name: document.getElementById('theme-name').value,
                description: document.getElementById('theme-description').value,
                emoji: document.getElementById('theme-emoji').value,
                items: document.getElementById('theme-items').value.split(',').map(item => item.trim()),
                prices: document.getElementById('theme-prices').value.split(',').map(price => parseInt(price.trim())),
                itemEmojis: document.getElementById('theme-emojis').value.split(',').map(emoji => emoji.trim()),
                categories: []
            };
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
            if (themeData.items.length !== 6 || themeData.prices.length !== 6 || themeData.itemEmojis.length !== 6) {
                alert('–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–¥–º–µ—Ç–æ–≤, —Ü–µ–Ω –∏ —ç–º–æ–¥–∑–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ä–∞–≤–Ω–æ 6!');
                return;
            }
            
            // –°–æ–±–∏—Ä–∞–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
            const categoryItems = document.querySelectorAll('.category-item');
            
            if (categoryItems.length === 0) {
                alert('–î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –∫–∞—Ç–µ–≥–æ—Ä–∏—é!');
                return;
            }
            
            categoryItems.forEach((categoryItem, categoryIndex) => {
                const categoryName = categoryItem.querySelector('.category-name-input').value;
                const categoryColor = categoryItem.querySelector('.category-color-select').value;
                const questionsContainer = categoryItem.querySelector('.questions-container');
                const questionItems = questionsContainer.querySelectorAll('.question-item');
                
                if (questionItems.length === 0) {
                    alert(`–í –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "${categoryName}" –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –≤–æ–ø—Ä–æ—Å!`);
                    return;
                }
                
                const category = {
                    id: categoryIndex + 1,
                    name: categoryName,
                    color: categoryColor,
                    questions: []
                };
                
                // –°–æ–±–∏—Ä–∞–µ–º –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                questionItems.forEach((questionItem, questionIndex) => {
                    const questionText = questionItem.querySelector('.question-text-input').value;
                    const answerInputs = questionItem.querySelectorAll('.answer-input');
                    const correctAnswerRadio = questionItem.querySelector('input[type="radio"]:checked');
                    
                    const answers = Array.from(answerInputs).map(input => input.value);
                    const correctAnswer = parseInt(correctAnswerRadio.value);
                    
                    category.questions.push({
                        question: questionText,
                        answers: answers,
                        correct: correctAnswer
                    });
                });
                
                themeData.categories.push(category);
            });
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–º—É –≤ localStorage
            const customThemes = JSON.parse(localStorage.getItem('customThemes') || '[]');
            
            if (editingThemeId) {
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ç–µ–º—É
                const index = customThemes.findIndex(t => t.id === editingThemeId);
                if (index !== -1) {
                    customThemes[index] = themeData;
                }
            } else {
                // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é —Ç–µ–º—É
                customThemes.push(themeData);
            }
            
            localStorage.setItem('customThemes', JSON.stringify(customThemes));
            
            alert('–¢–µ–º–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!');
            closeCustomThemeModal();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ —Ä–∞–∑–¥–µ–ª–æ–≤
            updateCustomThemesFolder();
        });

        function updateCustomThemesFolder() {
            const folderContent = document.getElementById('themes-folder-content');
            const customThemes = JSON.parse(localStorage.getItem('customThemes') || '[]');
            
            // –û—á–∏—â–∞–µ–º –ø–∞–ø–∫—É
            folderContent.innerHTML = '';
            
            if (customThemes.length === 0) {
                folderContent.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 20px; color: #666;">
                        üìù –£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ç–µ–º. –ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å —Å–≤–æ—é —Ç–µ–º—É" —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—É—é!
                    </div>
                `;
                return;
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–º—ã –≤ –ø–∞–ø–∫—É
            customThemes.forEach(theme => {
                const themeCard = document.createElement('div');
                themeCard.className = 'folder-theme-card';
                themeCard.onclick = () => playCustomTheme(theme.id);
                themeCard.innerHTML = `
                    <div class="folder-theme-icon">${theme.emoji}</div>
                    <div class="folder-theme-name">${theme.name}</div>
                    <div class="folder-theme-description">${theme.description || '–ë–µ–∑ –æ–ø–∏—Å–∞–Ω–∏—è'}</div>
                    <div class="folder-theme-actions">
                        <button class="btn-small btn-edit" onclick="event.stopPropagation(); editCustomTheme('${theme.id}')">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                        <button class="btn-small btn-delete" onclick="event.stopPropagation(); deleteCustomTheme('${theme.id}')">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                    </div>
                `;
                
                folderContent.appendChild(themeCard);
            });
        }

        function toggleThemesFolder() {
            const folderContent = document.getElementById('themes-folder-content');
            const toggleButton = document.querySelector('.folder-toggle');
            
            folderContent.classList.toggle('expanded');
            
            if (folderContent.classList.contains('expanded')) {
                toggleButton.textContent = 'üìÇ –°–∫—Ä—ã—Ç—å —Ç–µ–º—ã';
                // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ–º—ã –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ—Ç–∫—Ä—ã—Ç–∏–∏
                if (folderContent.children.length === 0) {
                    updateCustomThemesFolder();
                }
            } else {
                toggleButton.textContent = 'üìÇ –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–º—ã';
            }
        }

        function playCustomTheme(themeId) {
            selectedSection = `custom-${themeId}`;
            startGame();
        }

        function editCustomTheme(themeId) {
            openCustomThemeModal(themeId);
        }

        function deleteCustomTheme(themeId) {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É —Ç–µ–º—É? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.')) {
                const customThemes = JSON.parse(localStorage.getItem('customThemes') || '[]');
                const updatedThemes = customThemes.filter(theme => theme.id !== themeId);
                localStorage.setItem('customThemes', JSON.stringify(updatedThemes));
                updateCustomThemesFolder();
                alert('–¢–µ–º–∞ —É–¥–∞–ª–µ–Ω–∞!');
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        createAnimatedBackground();
        selectSection('chess'); // –í—ã–±–∏—Ä–∞–µ–º —à–∞—Ö–º–∞—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    </script>
</body>
</html>